<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
  <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'" /> -->
  <title>快乐拷贝</title>
  <link rel="stylesheet" href="./assets/css/tailwind.min.css">
  <link rel="stylesheet" href="./assets/element-ui/index.css">
  <link rel="stylesheet" href="./assets/css/pattern.min.css">
</head>

<body>
  <div id="app" class="p-4">
    <div class="list">
      <div v-for="(item, index) in list" :key="item.label">
        <div @dragover="$event.preventDefault()" @dragenter="dropEnter($event, index)"
          @dragleave="dropLeave($event, index)" @drop="dropEnd($event, index)" class="p-1"></div>
        <div :class="selected == item.label ? 'pattern-checks-sm text-green-200' : 'hover:bg-green-100'"
          class="my-1 cursor-pointer rounded-sm p-2 flex items-center text-green-50 bg-gray-50"
          @click="select(item.label)" draggable="true" @contextmenu="selected = item.label"
          @dragstart="dragStart($event, index)">
          <div class="flex-none mr-20 text-black font-medium">{{item.label}}</div>
          <div class="flex-auto text-right text-red-500">
            <div v-if="!item.hidden">
              <el-image :src="item.value" v-if="item.type == 'img'" class="border-dashed border-2 h-8" fit="contain"
                :preview-src-list="[item.value]">
              </el-image>
              <span v-else>{{item.value}}</span>
            </div>
            <div v-if="item.hidden">***</div>
          </div>
          <div class="flex-none cursor-pointer ml-2 text-gray-500" @click.stop="toggleHidden(item.label)">
            <i class="el-icon-view"></i>
          </div>
        </div>
      </div>
      <div @dragover="$event.preventDefault()" @dragenter="dropEnter($event, list.length)"
        @dragleave="dropLeave($event, list.length)" @drop="dropEnd($event, list.length)" class="p-1"></div>
      <div v-if="!list.length" class="text-sm">啥也没有，点击左上角“标签-新建”可创建标签。</div>
    </div>
    <el-dialog title="新建标签" :visible.sync="newMenuDialog" :close-on-click-modal="false" @close="closeAdd">
      <el-form :model="newMenu">
        <el-form-item label="标签名称" :label-width="300">
          <el-input v-model="newMenu.label" autocomplete="off" clearable></el-input>
        </el-form-item>
        <el-form-item label="标签值" :label-width="300">
          <el-image :src="newMenu.value" v-if="newMenu.type == 'img'" class="border-dashed border-2 h-16" fit="contain">
          </el-image>
          <el-input v-model="newMenu.value" autocomplete="off" v-else placeholder="请输入文本" clearable>
          </el-input>
        </el-form-item>
        <el-button @click="selectFile">or选择图片</el-button>
      </el-form>
      <div slot="footer" class="dialog-footer">
        <el-button @click="closeAdd">取 消</el-button>
        <el-button type="success" @click="addTrayMenu">确 定</el-button>
      </div>
    </el-dialog>
    <el-dialog title="编辑标签" :visible.sync="editMenuDialog" :close-on-click-modal="false" @close="closeEdit">
      <el-form :model="newMenu">
        <el-form-item label="标签名称" :label-width="300">
          <el-input v-model="newMenu.label" autocomplete="off" clearable></el-input>
        </el-form-item>
        <el-form-item label="标签值" :label-width="300">
          <el-image :src="newMenu.value" v-if="newMenu.type == 'img'" class="border-dashed border-2 h-16" fit="contain">
          </el-image>
          <el-input v-model="newMenu.value" autocomplete="off" v-else placeholder="请输入文本" clearable>
          </el-input>
        </el-form-item>
        <el-button @click="selectFile">or选择图片</el-button>
      </el-form>
      <div slot="footer" class="dialog-footer">
        <el-button @click="closeEdit">取 消</el-button>
        <el-button type="success" @click="editTrayMenu">确 定</el-button>
      </div>
    </el-dialog>
    <el-dialog title="关于" :visible.sync="aboutDialog" :close-on-click-modal="false">
      <div>
        <h1 class="text-center text-lg font-bold mb-3">happy-copy</h1>
        <p>描述：帮助你快速复制一段内容到剪切板</p>
        <p>版本：{{version}}</p>
        <p>贡献者：奥利会，山楂</p>
        <p>项目地址：https://gitlab.ctbiyi.com/jienhui/happy-copy</p>
      </div>
    </el-dialog>
  </div>
  <script src="./assets/js/vue@2.js"></script>
  <script src="./assets/js/lodash.min.js"></script>
  <script src="./assets/element-ui/index.js"></script>
  <script src="./renderer.js"></script>
</body>

</html>